<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CSAPP Data Lab | vaaandark&#39;s blog</title>
<meta name="keywords" content="CSAPP, å¸ƒå°”ä»£æ•°, ç¼–ç , Cè¯­è¨€">
<meta name="description" content="æœ€è¿‘æœ¬æ¥åœ¨çœ‹ CSAPP åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚

å‡†å¤‡å·¥ä½œ

åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚
åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶

tar -xf datalab-handout.tar

å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬driver.plç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨dnfå®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ jyi2yaï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨makefileé‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º-m64ã€‚

é¢˜ç›®ä¸é¢˜è§£
int éƒ¨åˆ†
bitXor
åªç”¨~å’Œ&amp;å®ç°^">
<meta name="author" content="vaaandark">
<link rel="canonical" href="https://vaaandark.top/posts/csapp-data-lab/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.556a50c7c92c2556e588f602528ac3c41884cdb6e537ce0647b5e200cd1c2094.css" integrity="sha256-VWpQx8ksJVbliPYCUorDxBiEzbblN84GR7XiAM0cIJQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://vaaandark.top/image/vaaandark.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://vaaandark.top/image/vaaandark.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://vaaandark.top/image/vaaandark.png">
<link rel="apple-touch-icon" href="https://vaaandark.top/image/vaaandark.png">
<link rel="mask-icon" href="https://vaaandark.top/image/vaaandark.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://vaaandark.top/posts/csapp-data-lab/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://vaaandark.top/posts/csapp-data-lab/">
  <meta property="og:site_name" content="vaaandark&#39;s blog">
  <meta property="og:title" content="CSAPP Data Lab">
  <meta property="og:description" content="æœ€è¿‘æœ¬æ¥åœ¨çœ‹ CSAPP åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚
å‡†å¤‡å·¥ä½œ åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚ åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶ tar -xf datalab-handout.tar å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬driver.plç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨dnfå®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ jyi2yaï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨makefileé‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º-m64ã€‚ é¢˜ç›®ä¸é¢˜è§£ int éƒ¨åˆ† bitXor åªç”¨~å’Œ&amp;å®ç°^">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-02-02T13:06:25+00:00">
    <meta property="article:modified_time" content="2022-02-02T13:06:25+00:00">
    <meta property="article:tag" content="CSAPP">
    <meta property="article:tag" content="å¸ƒå°”ä»£æ•°">
    <meta property="article:tag" content="ç¼–ç ">
    <meta property="article:tag" content="Cè¯­è¨€">
    <meta property="og:image" content="https://vaaandark.top/image/data_lab.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://vaaandark.top/image/data_lab.jpg">
<meta name="twitter:title" content="CSAPP Data Lab">
<meta name="twitter:description" content="æœ€è¿‘æœ¬æ¥åœ¨çœ‹ CSAPP åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚

å‡†å¤‡å·¥ä½œ

åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚
åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶

tar -xf datalab-handout.tar

å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬driver.plç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨dnfå®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ jyi2yaï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨makefileé‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º-m64ã€‚

é¢˜ç›®ä¸é¢˜è§£
int éƒ¨åˆ†
bitXor
åªç”¨~å’Œ&amp;å®ç°^">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://vaaandark.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "CSAPP Data Lab",
      "item": "https://vaaandark.top/posts/csapp-data-lab/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CSAPP Data Lab",
  "name": "CSAPP Data Lab",
  "description": "æœ€è¿‘æœ¬æ¥åœ¨çœ‹ CSAPP åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚\nå‡†å¤‡å·¥ä½œ åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚ åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶ tar -xf datalab-handout.tar å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬driver.plç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨dnfå®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ jyi2yaï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨makefileé‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º-m64ã€‚ é¢˜ç›®ä¸é¢˜è§£ int éƒ¨åˆ† bitXor åªç”¨~å’Œ\u0026amp;å®ç°^\n",
  "keywords": [
    "CSAPP", "å¸ƒå°”ä»£æ•°", "ç¼–ç ", "Cè¯­è¨€"
  ],
  "articleBody": "æœ€è¿‘æœ¬æ¥åœ¨çœ‹ CSAPP åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚\nå‡†å¤‡å·¥ä½œ åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚ åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶ tar -xf datalab-handout.tar å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬driver.plç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨dnfå®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ jyi2yaï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨makefileé‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º-m64ã€‚ é¢˜ç›®ä¸é¢˜è§£ int éƒ¨åˆ† bitXor åªç”¨~å’Œ\u0026å®ç°^\nå¯ä»¥ä½¿ç”¨å¾·æ‘©æ ¹å®šç†ç§’æ€ã€‚\nint bitXor(int x, int y) { return ~(~(~x \u0026 y) \u0026 ~(x \u0026 ~y)); } tmin ä½¿ç”¨ä½è¿ç®—è·å–è¡¥ç çš„æœ€å°å€¼\nç”±äºé¢˜ç›®å·²ç»å‘Šè¯‰äº†æˆ‘ä»¬æœºå™¨ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºintç±»å‹æ˜¯å å…«ä¸ªå­—èŠ‚ã€‚\nint tmin(void) { return 1 \u003c\u003c 31; } isTmax ä½¿ç”¨ä½è¿ç®—è·å–åˆ¤æ–­æ˜¯å¦æ˜¯è¡¥ç çš„æœ€å¤§å€¼\nè¿™é¢˜ç›¸è¾ƒä¸Šé¢˜æœ‰ä¸€å®šçš„æŠ€å·§ã€‚ä¸»è¦æ€è·¯ä¸ºæŠŠè¡¥ç çš„æ¯ä¸€ä½å˜ä¸º1ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°0æˆ–é0çš„å€¼ã€‚åœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­è¦æ³¨æ„åˆ°-1åŒæ ·é€‚ç”¨ï¼Œæ‰€ä»¥è¦å¯¹-1è¿›è¡Œç‰¹åˆ¤ã€‚\nint isTmax(int x) { // å¦‚æœæ˜¯0b111...111æˆ–è€…0b011...111å°±èƒ½å˜ä¸º0b000...000 int check = ~(x + 1 + x); // å¦‚æœæ˜¯-1åˆ™ç»“æœä¸º1ï¼Œæ’é™¤æ‰ int except = !(x + 1); return !(check | except); } allOddBits åˆ¤æ–­æ‰€æœ‰å¥‡æ•°ä½æ˜¯å¦éƒ½ä¸º1\nä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯ç›´æ¥æš´åŠ›åˆ¤æ–­æ¯ä¸ªå¥‡æ•°ä½æ˜¯å¦ä¸º1ï¼ˆå…ˆç§»ä½ç„¶åè¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼‰ï¼Œä½†æ˜¯è¿™æ ·åº”è¯¥å¾—ä¸åˆ°æ€§èƒ½åˆ†ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†ç±»ä¼¼äºäºŒåˆ†æ³•çš„æ€æƒ³ï¼Œæ¯æ¬¡å¯¹åŠæ¯”è¾ƒï¼Œæœ€ååªéœ€è¦ä¸ƒæ¬¡æ“ä½œæã€‚\nint allOddBits(int x) { x \u0026= (x \u003e\u003e 16); x \u0026= (x \u003e\u003e 8); return !(x \u0026 0xaa ^ 0xaa); } negate ä¸ä½¿ç”¨-æ“ä½œç¬¦ï¼Œæ±‚-x\nè¿ç”¨è¡¥ç çš„åŸºç¡€çŸ¥è¯†å¾—åˆ°ç­”æ¡ˆã€‚\nint negate(int x) { return (~x + 1); } isAsciiDigit è®¡ç®—è¾“å…¥å€¼æ˜¯å¦æ˜¯æ•°å­—0-9çš„ ASCII å€¼ã€‚\nä¸€å¼€å§‹æ‰“ç®—å…ˆåˆ¤æ–­å‰å¤šå°‘å¤šå°‘ä½æ˜¯ä¸æ˜¯0ï¼Œåé¢æ˜¯å¦æ»¡è¶³0x30 \u003c= x \u003c= 0x39ï¼Œåæ¥ä¸€æƒ³å‘ç°è¿™æ ·å¥½å¤æ‚ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡èŒƒå›´åˆ¤æ–­ã€‚\nå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°æŠ€å·§ï¼Œè¿™ä¸ªæŠ€å·§ä¹Ÿå¯ä»¥ä¼˜åŒ–åˆ†æ”¯é¢„æµ‹ã€‚\nif (x \u003e= a \u0026\u0026 x \u003c= b) { do_something(); } // ç­‰ä»·äº if ((x - a) | (b - x) \u003e= ) { do_something(); } è¿™é‡Œä¸èƒ½ä½¿ç”¨-ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨å‰é¢é¢˜ç›®çš„ç»“è®ºï¼Œé€šè¿‡å–åå’ŒåŠ æ³•ä»£æ›¿å‡æ³•ã€‚\näºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ç­”æ¡ˆï¼š\nint isAsciiDigit(int x) { return !(((x + (~0x30 + 1)) | ((~x + 1) + 0x39)) \u0026 (1 \u003c\u003c 31)); } conditional é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿä¸‰ç›®è¿ç®—\nä¸éš¾æƒ³åˆ°ï¼šä¸€ä¸ªæ•°å’Œ0x0è¿›è¡Œé€»è¾‘ä¸æ“ä½œçš„ç»“æœæ˜¯0x0ï¼Œä¸€ä¸ªæ•°å’Œ~0x0è¿›è¡Œé€»è¾‘ä¸æ“ä½œçš„ç»“æœæ˜¯æœ¬èº«ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªä¸xæœ‰å…³çš„æ©ç ï¼Œå½“xä¸ºçœŸæ—¶å°±æ˜¯0xffffffffï¼Œå¦åˆ™ä¸º0x0ã€‚\nint conditional(int x, int y, int z) { int mask = !x + (~1 + 1); y \u0026= mask; z \u0026= ~mask; return y | z; } isLessOrEqual é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿå°äºç­‰äº\nå°†ä¸¤ä¸ªæ•°ç§»åˆ°ä¸€è¾¹å˜ä¸ºå‡æ³•è¿ç®—ï¼Œå†æŠŠå‡æ³•è¿ç®—å˜ä¸ºåŠ ä¸Šç»å¯¹å€¼çš„åŠ æ³•è¿ç®—ï¼Œæœ€ååˆ¤æ–­æœ€é«˜ä½æ˜¯å¦ä¸º0å³å¯ã€‚\nint isLessOrEqual(int x, int y) { return !(y + (~x + 1) \u0026 (1 \u003c\u003c 31)); } ç»“æœè¿™ä¸ªä»£ç è¢«æœ‹å‹å‰æ‰äº†ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰è€ƒè™‘åˆ°æº¢å‡ºçš„æƒ…å†µï¼Œæ‰€ä»¥è¦åŠ ä¸Šå¯¹ä¸€ä¸ªæ˜¯æ­£æ•°ä¸€ä¸ªæ˜¯è´Ÿæ•°çš„ç‰¹åˆ¤ã€‚\nint isLessOrEqual(int x, int y) { return (((x \u003e\u003e 31) \u0026 1) | (!(y \u003e\u003e 31))) \u0026 !(y + (~x + 1) \u0026 (1 \u003c\u003c 31)); } logicalNeg é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿé€»è¾‘é\næˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°äº†è¿™æ ·çš„ä»£ç ï¼Œç»“æœå‘ç°æ²¡æœ‰æ‹¿åˆ°æ€§èƒ½åˆ†ï¼Œåˆšå¥½æ¯”è¦æ±‚å¤šä¸€ä¸ªæ“ä½œã€‚\nint logicalNeg(int x) { x ^= ~0; x \u0026= (x \u003e\u003e 16); x \u0026= (x \u003e\u003e 8); x \u0026= (x \u003e\u003e 4); x \u0026= (x \u003e\u003e 2); x \u0026= (x \u003e\u003e 1); return x \u0026 1; } äºæ˜¯æˆ‘åˆ†æè¿™æ®µåƒåœ¾ä»£ç ï¼Œå‘ç°x ^= ~0å°±å ç”¨äº†ä¸¤æ­¥æ“ä½œï¼Œè€Œä¸”æœ‰æ›´å¥½çš„æ›¿ä»£æ–¹æ³•ã€‚\nä¾ç„¶ä½¿ç”¨ç±»ä¼¼äºŒåˆ†æ³•çš„æ€æƒ³ï¼ŒåŒæ—¶ä»¥ä½¿ç”¨æˆ–æ“ä½œä¸ºä¸»ï¼Œå°±èƒ½èŠ‚çº¦æ“ä½œäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š\nint logicalNeg(int x) { x |= (x \u003e\u003e 16); x |= (x \u003e\u003e 8); x |= (x \u003e\u003e 4); x |= (x \u003e\u003e 2); x |= (x \u003e\u003e 1); return x \u0026 1 ^ 1; } howManyBits æ±‚æœ€å°‘ç”¨å¤šå°‘ä¸ªä½å¯ä»¥è¡¨ç¤ºå‡ºç»™å®šæ•°å­—\nåˆšå¼€å§‹åšè¿™é¢˜æ—¶ï¼Œæˆ‘çœ‹ç€é¢˜ç›®çš„ä¾‹å­æä¸æ‡‚ä¸ºå•¥-1åªéœ€è¦ä¸€ä½ã€‚æœ€åæˆ‘çš„ç†è§£å°±æ˜¯ï¼Œé¢˜ç›®æƒ³é—®çš„æ˜¯â€œæœ€å°‘ç”¨å¤šå°‘ä¸ªä½å¯ä»¥è¡¨ç¤ºä»0åˆ°ç»™å®šçš„æ•°å­—â€ï¼Œå› æ­¤å¦‚æœç»™å‡ºè´Ÿæ•°æˆ‘ä»¬å°±ä¸éœ€è¦è€ƒè™‘æ­£æ•°ï¼Œåä¹‹åŒç†ã€‚\næ‰€ä»¥è¿™é“é¢˜è½¬åŒ–ä¸ºäº†æ±‚ $log_2x$ ã€‚\nè¿˜æ˜¯å¯ä»¥å°†ç”¨ç±»ä¼¼äºŒåˆ†çš„æ€æƒ³è§£é¢˜ã€‚é¦–å…ˆåˆ¤æ–­å‰16ä½æ˜¯å¦æœ‰1ï¼Œå¦‚æœæœ‰å°±è¦åŠ ä¸Š16ï¼ŒåŒæ—¶ä¸‹ä¸€æ¬¡çš„ç§»ä½è¦å¤šç§»åŠ¨16ä½ï¼Œä¾æ­¤ç±»æ¨ã€‚æ¯æ¬¡åŠ ä¸Šçš„æƒä¸åŒï¼Œä»£è¡¨è¿™æ¬¡åˆ¤æ–­çš„ä¸€å…±æœ‰nä½ï¼ˆ16ã€8ã€4ã€2ã€1ï¼‰\nint howManyBits(int x) { int mask, b16, b8, b4, b2, b1, b0; mask = x \u003e\u003e 31; x = (mask \u0026 ~x) | (~mask \u0026 x); b16 = !!(x \u003e\u003e 16) \u003c\u003c 4; x = x \u003e\u003e b16; b8 = !!(x \u003e\u003e 8) \u003c\u003c 3; x = x \u003e\u003e b8; b4 = !!(x \u003e\u003e 4) \u003c\u003c 2; x = x \u003e\u003e b4; b2 = !!(x \u003e\u003e 2) \u003c\u003c 1; x = x \u003e\u003e b2; b1 = !!(x \u003e\u003e 1); x = x \u003e\u003e b1; b0 = x; return b16 + b8 + b4 + b2 + b1 + b0 + 1; } float éƒ¨åˆ† æµ®ç‚¹æ•°çš„é¢˜ç›®æ¯”è¾ƒç®€å•ï¼Œåªè€ƒå¯Ÿå…¶ç»“æ„è€Œä¸æ˜¯è¿ç®—ã€‚\nä¸ºäº†ä½è¿ç®—æ–¹ä¾¿ï¼Œé¢˜ç›®ä¸­ç»™å‡ºçš„å‡½æ•°å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ä¸floaté•¿åº¦ç›¸åŒçš„unsigned intæˆ–è€…int\nfloatScale2 æ±‚ä¸€ä¸ªæµ®ç‚¹æ•°ä¹˜2\né¦–å…ˆå–å‡ºç¬¦å·signã€å°¾æ•°fracã€é˜¶ç expã€‚ å¦‚æœé˜¶ç æ˜¯0ï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªéè§„æ ¼åŒ–çš„æµ®ç‚¹æ•°ï¼Œç”±äºæµ®ç‚¹æ•°çš„åˆ†è§„æ ¼åŒ–åˆ°è§„æ ¼åŒ–çš„è¿‡æ¸¡æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å°¾æ•°å‘å·¦ç§»åŠ¨ä¸€ä½å˜æˆè§„æ ¼åŒ–æµ®ç‚¹æ•°ä¸æ˜¯ç‰¹æ®Šæƒ…å†µã€‚ å¦‚æœé˜¶ç å…¨ä¸º1ï¼Œè¯´æ˜æ˜¯æ— ç©·å¤§ï¼Œç›´æ¥åŸæ ·è¿”å›å³å¯ã€‚ ç»™é˜¶ç åŠ ä¸Š1ï¼Œå³æ˜¯ç»™å˜é‡expåŠ ä¸Š0x800000ã€‚ å¦‚æœæº¢å‡ºäº†å˜ä¸ºæ— ç©·å¤§ï¼Œå°±è¦å°†å°¾æ•°å˜ä¸º0ï¼Œå¦åˆ™å°±æ˜¯NaNäº†ã€‚ å°†ä¸‰éƒ¨åˆ†æ‹¼æ¥åè¿”å›ã€‚ unsigned floatScale2(unsigned uf) { unsigned sign = uf \u0026 0x80000000; unsigned exp = uf \u0026 0x7f800000; unsigned frac = uf \u0026 0x007fffff; if (exp == 0) return sign | uf \u003c\u003c 1; if (exp == 0x7f800000) return uf; exp += 0x00800000; if (exp == 0x7f800000) frac = 0; return sign | exp | frac; } floatFloat2Int å°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´å‹æ•°\nåœ¨ CSAPP ä¸­ä»‹ç»è¿‡å‡ ç§èˆå…¥çš„æ–¹æ³•ï¼Œåœ¨è®¡ç®—ä¸­å‘å¶æ•°ï¼ˆå¥‡æ•°ï¼‰ä½èˆå…¥ä¼šå‡å°è¯¯å·®ï¼Œè€Œåœ¨ç±»å‹è½¬æ¢ä¸­ï¼Œä½¿ç”¨å‘é›¶èˆå…¥ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚\né¦–å…ˆå°†ç¬¦å·ã€å°¾æ•°ã€é˜¶ç å–å‡ºæ¥ï¼Œä¸ºäº†åŠ å‡æ³•è®¡ç®—æ–¹ä¾¿ï¼Œå¯¹é˜¶ç è¿›è¡Œäº†ç§»ä½ï¼Œå¹¶åŠ ä¸Šäº†127ã€‚ å°¾æ•°çš„ç¬¬24ä½ç½®ä¸º1ï¼Œå› ä¸ºåœ¨è§„æ ¼åŒ–æ•°ä¸­å°±æ˜¯1.xçš„å½¢å¼ã€‚è€Œéè§„æ ¼åŒ–æ•°èˆå…¥å˜ä¸º0ï¼Œä¸éœ€è¦è€ƒè™‘å…¶å°¾æ•°ã€‚ å¦‚æœé˜¶å°äº0ï¼Œç›´æ¥è¿”å›0ã€‚ å¦‚æœé˜¶å¤§äº31ï¼Œè¯´æ˜æ˜¯æ— ç©·å¤§ã€‚ å…¶ä½™æƒ…å†µå°±æ˜¯å¯¹åŠ ä¸Š1.xï¼ˆxä¸ºå°¾æ•°ï¼‰è¿›è¡Œç§»ä½ï¼Œç”±äºå°¾æ•°é•¿24ä½ï¼Œå› æ­¤æœ‰æ–¹å‘å’Œç»å¯¹å€¼è¦æ³¨æ„ã€‚ å¸¦ä¸Šç¬¦å·åè¿”å›ç­”æ¡ˆã€‚ int floatFloat2Int(unsigned uf) { int ans; int sign = uf \u0026 0x80000000; int exp = ((uf \u003e\u003e 23) \u0026 0xff) -127; int frac = (uf \u0026 0x007fffff) | 0x00800000; if (exp \u003c 0) return 0; if (exp \u003e 31) return 0x80000000; if (exp \u003c 23) ans = frac \u003e\u003e (23 - exp); else ans = frac \u003c\u003c (exp - 23); return sign ? ~ans + 1 : ans; } floatPower2 æ±‚$2.0^x$\nåˆ©ç”¨ä¸€ä¸ªç»“è®ºï¼šæœ€å°çš„éè§„æ ¼åŒ–æ•°æ˜¯ $2^{-23}*2^{-126}$ ï¼Œæœ€å¤§çš„éè§„æ ¼åŒ–æ•°æ˜¯ $(1-u)*2^{-126}$ ï¼Œæœ€å°çš„è§„æ ¼åŒ–æ•°æ˜¯ $2^{-126}$ ï¼Œæœ€å¤§è§„æ ¼åŒ–æ•°æ˜¯ $(2-u)*2^{127}$ï¼Œå…¶ä¸­ $u$ ä¸ºæ— ç©·å°ã€‚\nunsigned floatPower2(int x) { if (x \u003c -149) return 0; if (x \u003c -126) return 1 \u003c\u003c x + 149; if (x \u003c 128) return x + 127 \u003c\u003c 23; return 0xff \u003c\u003c 23; } æ€»ç»“ æµ‹è¯„ç»“æœ\nCorrectness Results\tPerf Results Points\tRating\tErrors\tPoints\tOps\tPuzzle 1\t1\t0\t2\t8\tbitXor 1\t1\t0\t2\t1\ttmin 1\t1\t0\t2\t7\tisTmax 2\t2\t0\t2\t7\tallOddBits 2\t2\t0\t2\t2\tnegate 3\t3\t0\t2\t10\tisAsciiDigit 3\t3\t0\t2\t8\tconditional 3\t3\t0\t2\t6\tisLessOrEqual 4\t4\t0\t2\t12\tlogicalNeg 4\t4\t0\t2\t36\thowManyBits 4\t4\t0\t2\t11\tfloatScale2 4\t4\t0\t2\t15\tfloatFloat2Int 4\t4\t0\t2\t10\tfloatPower2 Score = 62/62 [36/36 Corr + 26/26 Perf] (133 total operators) åšäº† CSAPP çš„ Data Lab è¿˜æ˜¯æ”¶è·è‰¯å¤šçš„ï¼š\nå‘ç°è‡ªå·±ä¹‹å‰å­¦ä¹ çš„ä½è¿ç®—å’Œæµ®ç‚¹æ•°çš„çŸ¥è¯†è¿˜æœ‰ä¸å°‘æ¼æ´ï¼Œå¹¸å¥½è¡¥èµ·æ¥äº†ã€‚ åœ¨åšè¿™ç§é™åˆ¶æ“ä½œçš„é¢˜ç›®æ—¶ï¼Œä¸€å¼€å§‹è¿˜æ˜¯ä¼šæ„Ÿè§‰å¾ˆä¸é€‚åº”ï¼Œç–¯ç‹‚åœ°æƒ³å†™åˆ†æ”¯åˆ¤æ–­ç­‰æ“ä½œã€‚åšæŒä¸‹æ¥ä¹‹åå°±æœ‰ä¸å°çš„æé«˜ï¼Œå¯¹æŠ½è±¡èƒ½åŠ›å’Œå†™æ›´é«˜æ€§èƒ½çš„ä»£ç éƒ½æœ‰å¸®åŠ©ã€‚ Lab ä¸­ç»™å‡ºçš„makefileå¼€çš„ç¼–è¯‘é€‰é¡¹ç»™æˆ‘æŠ¥äº†å¾ˆå¤šè­¦å‘Šï¼Œè®©æˆ‘å‘ç°æˆ‘çš„ä»£ç ä¹ æƒ¯ä¸æ˜¯å¾ˆå¥½ï¼Œè¿˜æœ‰å¾ˆå¤§è¿›æ­¥ç©ºé—´ã€‚ ",
  "wordCount" : "2630",
  "inLanguage": "zh",
  "image":"https://vaaandark.top/image/data_lab.jpg","datePublished": "2022-02-02T13:06:25Z",
  "dateModified": "2022-02-02T13:06:25Z",
  "author":{
    "@type": "Person",
    "name": "vaaandark"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://vaaandark.top/posts/csapp-data-lab/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "vaaandark's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://vaaandark.top/image/vaaandark.png"
    }
  }
}
</script>

<script>
  MathJax = {
    tex: {
      inlineMath: [["$", "$"]],
    },
    displayMath: [
      ["$$", "$$"],
      ["\[\[", "\]\]"],
    ],
    svg: {
      fontCache: "global",
    },
  };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script>


</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://vaaandark.top/" accesskey="h" title="vaaandark&#39;s blog (Alt + H)">
                <img src="https://vaaandark.top/image/vaaandark.png" alt="" aria-label="logo"
                    height="35">vaaandark&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://vaaandark.top/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://vaaandark.top/posts/" title="Posts">
                    <span>ğŸ“„ å½’æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://vaaandark.top/categories/" title="categories">
                    <span>ğŸ“‚ åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://vaaandark.top/tags/" title="tags">
                    <span>ğŸ”– æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://vaaandark.top/about/" title="å…³äºæˆ‘">
                    <span>ğŸ™‹ å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://vaaandark.top/links/" title="å‹é“¾">
                    <span>ğŸ¤ å‹é“¾</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://vaaandark.top/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://vaaandark.top/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      CSAPP Data Lab
    </h1>
    <div class="post-meta"><span title='2022-02-02 13:06:25 +0000 UTC'>2022 2æœˆ 02</span>&nbsp;Â·&nbsp;6 åˆ†é’Ÿ&nbsp;Â·&nbsp;vaaandark

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="https://vaaandark.top/image/data_lab.jpg" alt="">
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c" aria-label="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</a></li>
                <li>
                    <a href="#%e9%a2%98%e7%9b%ae%e4%b8%8e%e9%a2%98%e8%a7%a3" aria-label="é¢˜ç›®ä¸é¢˜è§£">é¢˜ç›®ä¸é¢˜è§£</a><ul>
                        
                <li>
                    <a href="#int-%e9%83%a8%e5%88%86" aria-label="int éƒ¨åˆ†">int éƒ¨åˆ†</a><ul>
                        
                <li>
                    <a href="#bitxor" aria-label="bitXor">bitXor</a></li>
                <li>
                    <a href="#tmin" aria-label="tmin">tmin</a></li>
                <li>
                    <a href="#istmax" aria-label="isTmax">isTmax</a></li>
                <li>
                    <a href="#alloddbits" aria-label="allOddBits">allOddBits</a></li>
                <li>
                    <a href="#negate" aria-label="negate">negate</a></li>
                <li>
                    <a href="#isasciidigit" aria-label="isAsciiDigit">isAsciiDigit</a></li>
                <li>
                    <a href="#conditional" aria-label="conditional">conditional</a></li>
                <li>
                    <a href="#islessorequal" aria-label="isLessOrEqual">isLessOrEqual</a></li>
                <li>
                    <a href="#logicalneg" aria-label="logicalNeg">logicalNeg</a></li>
                <li>
                    <a href="#howmanybits" aria-label="howManyBits">howManyBits</a></li></ul>
                </li>
                <li>
                    <a href="#float-%e9%83%a8%e5%88%86" aria-label="float éƒ¨åˆ†">float éƒ¨åˆ†</a><ul>
                        
                <li>
                    <a href="#floatscale2" aria-label="floatScale2">floatScale2</a></li>
                <li>
                    <a href="#floatfloat2int" aria-label="floatFloat2Int">floatFloat2Int</a></li>
                <li>
                    <a href="#floatpower2" aria-label="floatPower2">floatPower2</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%80%bb%e7%bb%93" aria-label="æ€»ç»“">æ€»ç»“</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>æœ€è¿‘æœ¬æ¥åœ¨çœ‹ <em><strong>CSAPP</strong></em> åé¢çš„å†…å®¹ï¼Œä½†çªç„¶å‘ç°è‡ªå·±å‰é¢å¯èƒ½è¿˜æœ‰ä¸€äº›çŸ¥è¯†æŒæ¡ä¸å®Œå…¨ï¼Œå› æ­¤åšä¸€ä¸‹ Lab æ£€éªŒä¸€ä¸‹ã€‚</p>
<!-- more -->
<h1 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ<a hidden class="anchor" aria-hidden="true" href="#å‡†å¤‡å·¥ä½œ">#</a></h1>
<ol>
<li>åœ¨ CSAPP çš„å®˜ç½‘ä¸Šæ‰¾åˆ° Labï¼Œä¸‹è½½ Self-Study Handoutã€‚</li>
<li>åœ¨ä¸‹è½½ç›®å½•ä¸‹è§£å‹æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tar -xf datalab-handout.tar
</span></span></code></pre></div><ol start="3">
<li>å°è¯•æ‰§è¡Œè‡ªåŠ¨æµ‹è¯„è„šæœ¬<code>driver.pl</code>ç»“æœå‘ç°æ²¡æœ‰32ä½ç¯å¢ƒï¼Œäºæ˜¯ç”¨<code>dnf</code>å®‰è£…éœ€è¦çš„åº“ï¼ŒæŠ˜è…¾äº†ä¸€ä¼šå‘ç°è¿˜æ˜¯ä¸å¤ªè¡Œã€‚è¯·æ•™äº†å¤§ä½¬ <a href="https://www.cnblogs.com/jyi2ya"><strong>jyi2ya</strong></a>ï¼Œä»–å‘Šè¯‰æˆ‘å¯ä»¥ç›´æ¥åœ¨<code>makefile</code>é‡Œé¢æŠŠç¼–è¯‘æ¡ä»¶æ”¹ä¸º<code>-m64</code>ã€‚</li>
</ol>
<h1 id="é¢˜ç›®ä¸é¢˜è§£">é¢˜ç›®ä¸é¢˜è§£<a hidden class="anchor" aria-hidden="true" href="#é¢˜ç›®ä¸é¢˜è§£">#</a></h1>
<h2 id="int-éƒ¨åˆ†">int éƒ¨åˆ†<a hidden class="anchor" aria-hidden="true" href="#int-éƒ¨åˆ†">#</a></h2>
<h3 id="bitxor">bitXor<a hidden class="anchor" aria-hidden="true" href="#bitxor">#</a></h3>
<p>åªç”¨<code>~</code>å’Œ<code>&amp;</code>å®ç°<code>^</code></p>
<p>å¯ä»¥ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E5%BE%B7%E6%91%A9%E6%A0%B9%E5%AE%9A%E5%BE%8B"><strong>å¾·æ‘©æ ¹å®šç†</strong></a>ç§’æ€ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> bitXor(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> ~(~(~x &amp; y) &amp; ~(x &amp; ~y));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="tmin">tmin<a hidden class="anchor" aria-hidden="true" href="#tmin">#</a></h3>
<p>ä½¿ç”¨ä½è¿ç®—è·å–è¡¥ç çš„æœ€å°å€¼</p>
<p>ç”±äºé¢˜ç›®å·²ç»å‘Šè¯‰äº†æˆ‘ä»¬æœºå™¨ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸º<code>int</code>ç±»å‹æ˜¯å å…«ä¸ªå­—èŠ‚ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> tmin(<span style="color:#fff;font-weight:bold">void</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">1</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">31</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="istmax">isTmax<a hidden class="anchor" aria-hidden="true" href="#istmax">#</a></h3>
<p>ä½¿ç”¨ä½è¿ç®—è·å–åˆ¤æ–­æ˜¯å¦æ˜¯è¡¥ç çš„æœ€å¤§å€¼</p>
<p>è¿™é¢˜ç›¸è¾ƒä¸Šé¢˜æœ‰ä¸€å®šçš„æŠ€å·§ã€‚ä¸»è¦æ€è·¯ä¸ºæŠŠè¡¥ç çš„æ¯ä¸€ä½å˜ä¸º1ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°0æˆ–é0çš„å€¼ã€‚åœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­è¦æ³¨æ„åˆ°-1åŒæ ·é€‚ç”¨ï¼Œæ‰€ä»¥è¦å¯¹-1è¿›è¡Œç‰¹åˆ¤ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> isTmax(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">// å¦‚æœæ˜¯0b111...111æˆ–è€…0b011...111å°±èƒ½å˜ä¸º0b000...000
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>  <span style="color:#fff;font-weight:bold">int</span> check = ~(x + <span style="color:#ff0;font-weight:bold">1</span> + x);
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">// å¦‚æœæ˜¯-1åˆ™ç»“æœä¸º1ï¼Œæ’é™¤æ‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>  <span style="color:#fff;font-weight:bold">int</span> except = !(x + <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> !(check | except);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="alloddbits">allOddBits<a hidden class="anchor" aria-hidden="true" href="#alloddbits">#</a></h3>
<p>åˆ¤æ–­æ‰€æœ‰å¥‡æ•°ä½æ˜¯å¦éƒ½ä¸º1</p>
<p>ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯ç›´æ¥æš´åŠ›åˆ¤æ–­æ¯ä¸ªå¥‡æ•°ä½æ˜¯å¦ä¸º1ï¼ˆå…ˆç§»ä½ç„¶åè¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼‰ï¼Œä½†æ˜¯è¿™æ ·åº”è¯¥å¾—ä¸åˆ°æ€§èƒ½åˆ†ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†ç±»ä¼¼äºäºŒåˆ†æ³•çš„æ€æƒ³ï¼Œæ¯æ¬¡å¯¹åŠæ¯”è¾ƒï¼Œæœ€ååªéœ€è¦ä¸ƒæ¬¡æ“ä½œæã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> allOddBits(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">16</span>);
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">8</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> !(x &amp; <span style="color:#ff0;font-weight:bold">0xaa</span> ^ <span style="color:#ff0;font-weight:bold">0xaa</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="negate">negate<a hidden class="anchor" aria-hidden="true" href="#negate">#</a></h3>
<p>ä¸ä½¿ç”¨<code>-</code>æ“ä½œç¬¦ï¼Œæ±‚<code>-x</code></p>
<p>è¿ç”¨è¡¥ç çš„åŸºç¡€çŸ¥è¯†å¾—åˆ°ç­”æ¡ˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> negate(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> (~x + <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="isasciidigit">isAsciiDigit<a hidden class="anchor" aria-hidden="true" href="#isasciidigit">#</a></h3>
<p>è®¡ç®—è¾“å…¥å€¼æ˜¯å¦æ˜¯æ•°å­—<code>0-9</code>çš„ <strong>ASCII</strong> å€¼ã€‚</p>
<p>ä¸€å¼€å§‹æ‰“ç®—å…ˆåˆ¤æ–­å‰å¤šå°‘å¤šå°‘ä½æ˜¯ä¸æ˜¯0ï¼Œåé¢æ˜¯å¦æ»¡è¶³<code>0x30 &lt;= x &lt;= 0x39</code>ï¼Œåæ¥ä¸€æƒ³å‘ç°è¿™æ ·å¥½å¤æ‚ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡èŒƒå›´åˆ¤æ–­ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°æŠ€å·§ï¼Œè¿™ä¸ªæŠ€å·§ä¹Ÿå¯ä»¥ä¼˜åŒ–åˆ†æ”¯é¢„æµ‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (x &gt;= a &amp;&amp; x &lt;= b) {
</span></span><span style="display:flex;"><span>  do_something();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç­‰ä»·äº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">if</span> ((x - a) | (b - x) &gt;= ) {
</span></span><span style="display:flex;"><span>  do_something();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™é‡Œä¸èƒ½ä½¿ç”¨<code>-</code>ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨å‰é¢é¢˜ç›®çš„ç»“è®ºï¼Œé€šè¿‡å–åå’ŒåŠ æ³•ä»£æ›¿å‡æ³•ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ç­”æ¡ˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> isAsciiDigit(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> !(((x + (~<span style="color:#ff0;font-weight:bold">0x30</span> + <span style="color:#ff0;font-weight:bold">1</span>)) | ((~x + <span style="color:#ff0;font-weight:bold">1</span>) + <span style="color:#ff0;font-weight:bold">0x39</span>)) &amp; (<span style="color:#ff0;font-weight:bold">1</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">31</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="conditional">conditional<a hidden class="anchor" aria-hidden="true" href="#conditional">#</a></h3>
<p>é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿä¸‰ç›®è¿ç®—</p>
<p>ä¸éš¾æƒ³åˆ°ï¼šä¸€ä¸ªæ•°å’Œ<code>0x0</code>è¿›è¡Œé€»è¾‘ä¸æ“ä½œçš„ç»“æœæ˜¯<code>0x0</code>ï¼Œä¸€ä¸ªæ•°å’Œ<code>~0x0</code>è¿›è¡Œé€»è¾‘ä¸æ“ä½œçš„ç»“æœæ˜¯æœ¬èº«ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªä¸<code>x</code>æœ‰å…³çš„æ©ç ï¼Œå½“xä¸ºçœŸæ—¶å°±æ˜¯<code>0xffffffff</code>ï¼Œå¦åˆ™ä¸º<code>0x0</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> conditional(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y, <span style="color:#fff;font-weight:bold">int</span> z) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> mask = !x + (~<span style="color:#ff0;font-weight:bold">1</span> + <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>  y &amp;= mask;
</span></span><span style="display:flex;"><span>  z &amp;= ~mask;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> y | z;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="islessorequal">isLessOrEqual<a hidden class="anchor" aria-hidden="true" href="#islessorequal">#</a></h3>
<p>é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿå°äºç­‰äº</p>
<p>å°†ä¸¤ä¸ªæ•°ç§»åˆ°ä¸€è¾¹å˜ä¸ºå‡æ³•è¿ç®—ï¼Œå†æŠŠå‡æ³•è¿ç®—å˜ä¸ºåŠ ä¸Šç»å¯¹å€¼çš„åŠ æ³•è¿ç®—ï¼Œæœ€ååˆ¤æ–­æœ€é«˜ä½æ˜¯å¦ä¸º0å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> isLessOrEqual(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> !(y + (~x + <span style="color:#ff0;font-weight:bold">1</span>) &amp; (<span style="color:#ff0;font-weight:bold">1</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">31</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç»“æœè¿™ä¸ªä»£ç è¢«æœ‹å‹å‰æ‰äº†ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰è€ƒè™‘åˆ°æº¢å‡ºçš„æƒ…å†µï¼Œæ‰€ä»¥è¦åŠ ä¸Šå¯¹ä¸€ä¸ªæ˜¯æ­£æ•°ä¸€ä¸ªæ˜¯è´Ÿæ•°çš„ç‰¹åˆ¤ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> isLessOrEqual(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> (((x &gt;&gt; <span style="color:#ff0;font-weight:bold">31</span>) &amp; <span style="color:#ff0;font-weight:bold">1</span>) | (!(y &gt;&gt; <span style="color:#ff0;font-weight:bold">31</span>))) &amp; !(y + (~x + <span style="color:#ff0;font-weight:bold">1</span>) &amp; (<span style="color:#ff0;font-weight:bold">1</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">31</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="logicalneg">logicalNeg<a hidden class="anchor" aria-hidden="true" href="#logicalneg">#</a></h3>
<p>é€šè¿‡ä½è¿ç®—æ¨¡æ‹Ÿé€»è¾‘é</p>
<p>æˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°äº†è¿™æ ·çš„ä»£ç ï¼Œç»“æœå‘ç°æ²¡æœ‰æ‹¿åˆ°æ€§èƒ½åˆ†ï¼Œåˆšå¥½æ¯”è¦æ±‚å¤šä¸€ä¸ªæ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> logicalNeg(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  x ^= ~<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">16</span>);
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">8</span>);
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">4</span>);
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>  x &amp;= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> x &amp; <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>äºæ˜¯æˆ‘åˆ†æè¿™æ®µåƒåœ¾ä»£ç ï¼Œå‘ç°<code>x ^= ~0</code>å°±å ç”¨äº†ä¸¤æ­¥æ“ä½œï¼Œè€Œä¸”æœ‰æ›´å¥½çš„æ›¿ä»£æ–¹æ³•ã€‚</p>
<p>ä¾ç„¶ä½¿ç”¨ç±»ä¼¼äºŒåˆ†æ³•çš„æ€æƒ³ï¼ŒåŒæ—¶ä»¥ä½¿ç”¨æˆ–æ“ä½œä¸ºä¸»ï¼Œå°±èƒ½èŠ‚çº¦æ“ä½œäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> logicalNeg(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  x |= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">16</span>);
</span></span><span style="display:flex;"><span>  x |= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">8</span>);
</span></span><span style="display:flex;"><span>  x |= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">4</span>);
</span></span><span style="display:flex;"><span>  x |= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>  x |= (x &gt;&gt; <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> x &amp; <span style="color:#ff0;font-weight:bold">1</span> ^ <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="howmanybits">howManyBits<a hidden class="anchor" aria-hidden="true" href="#howmanybits">#</a></h3>
<p>æ±‚æœ€å°‘ç”¨å¤šå°‘ä¸ªä½å¯ä»¥è¡¨ç¤ºå‡ºç»™å®šæ•°å­—</p>
<p>åˆšå¼€å§‹åšè¿™é¢˜æ—¶ï¼Œæˆ‘çœ‹ç€é¢˜ç›®çš„ä¾‹å­æä¸æ‡‚ä¸ºå•¥<code>-1</code>åªéœ€è¦ä¸€ä½ã€‚æœ€åæˆ‘çš„ç†è§£å°±æ˜¯ï¼Œé¢˜ç›®æƒ³é—®çš„æ˜¯â€œæœ€å°‘ç”¨å¤šå°‘ä¸ªä½å¯ä»¥è¡¨ç¤ºä»0åˆ°ç»™å®šçš„æ•°å­—â€ï¼Œå› æ­¤å¦‚æœç»™å‡ºè´Ÿæ•°æˆ‘ä»¬å°±ä¸éœ€è¦è€ƒè™‘æ­£æ•°ï¼Œåä¹‹åŒç†ã€‚</p>
<p>æ‰€ä»¥è¿™é“é¢˜è½¬åŒ–ä¸ºäº†æ±‚ $log_2x$ ã€‚</p>
<p>è¿˜æ˜¯å¯ä»¥å°†ç”¨ç±»ä¼¼äºŒåˆ†çš„æ€æƒ³è§£é¢˜ã€‚é¦–å…ˆåˆ¤æ–­å‰16ä½æ˜¯å¦æœ‰1ï¼Œå¦‚æœæœ‰å°±è¦åŠ ä¸Š16ï¼ŒåŒæ—¶ä¸‹ä¸€æ¬¡çš„ç§»ä½è¦å¤šç§»åŠ¨16ä½ï¼Œä¾æ­¤ç±»æ¨ã€‚æ¯æ¬¡åŠ ä¸Šçš„æƒä¸åŒï¼Œä»£è¡¨è¿™æ¬¡åˆ¤æ–­çš„ä¸€å…±æœ‰<code>n</code>ä½ï¼ˆ16ã€8ã€4ã€2ã€1ï¼‰</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> howManyBits(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> mask, b16, b8, b4, b2, b1, b0;
</span></span><span style="display:flex;"><span>  mask = x &gt;&gt; <span style="color:#ff0;font-weight:bold">31</span>;
</span></span><span style="display:flex;"><span>  x = (mask &amp; ~x) | (~mask &amp; x);
</span></span><span style="display:flex;"><span>  b16 = !!(x &gt;&gt; <span style="color:#ff0;font-weight:bold">16</span>) &lt;&lt; <span style="color:#ff0;font-weight:bold">4</span>;
</span></span><span style="display:flex;"><span>  x = x &gt;&gt; b16;
</span></span><span style="display:flex;"><span>  b8 = !!(x &gt;&gt; <span style="color:#ff0;font-weight:bold">8</span>) &lt;&lt; <span style="color:#ff0;font-weight:bold">3</span>;
</span></span><span style="display:flex;"><span>  x = x &gt;&gt; b8;
</span></span><span style="display:flex;"><span>  b4 = !!(x &gt;&gt; <span style="color:#ff0;font-weight:bold">4</span>) &lt;&lt; <span style="color:#ff0;font-weight:bold">2</span>;
</span></span><span style="display:flex;"><span>  x = x &gt;&gt; b4;
</span></span><span style="display:flex;"><span>  b2 = !!(x &gt;&gt; <span style="color:#ff0;font-weight:bold">2</span>) &lt;&lt; <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>  x = x &gt;&gt; b2;
</span></span><span style="display:flex;"><span>  b1 = !!(x &gt;&gt; <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>  x = x &gt;&gt; b1;
</span></span><span style="display:flex;"><span>  b0 = x;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> b16 + b8 + b4 + b2 + b1 + b0 + <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="float-éƒ¨åˆ†">float éƒ¨åˆ†<a hidden class="anchor" aria-hidden="true" href="#float-éƒ¨åˆ†">#</a></h2>
<p>æµ®ç‚¹æ•°çš„é¢˜ç›®æ¯”è¾ƒç®€å•ï¼Œåªè€ƒå¯Ÿå…¶ç»“æ„è€Œä¸æ˜¯è¿ç®—ã€‚</p>
<blockquote>
<p>ä¸ºäº†ä½è¿ç®—æ–¹ä¾¿ï¼Œé¢˜ç›®ä¸­ç»™å‡ºçš„å‡½æ•°å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ä¸<code>float</code>é•¿åº¦ç›¸åŒçš„<code>unsigned int</code>æˆ–è€…<code>int</code></p>
</blockquote>
<h3 id="floatscale2">floatScale2<a hidden class="anchor" aria-hidden="true" href="#floatscale2">#</a></h3>
<p>æ±‚ä¸€ä¸ªæµ®ç‚¹æ•°ä¹˜2</p>
<ol>
<li>é¦–å…ˆå–å‡ºç¬¦å·<code>sign</code>ã€å°¾æ•°<code>frac</code>ã€é˜¶ç <code>exp</code>ã€‚</li>
<li>å¦‚æœé˜¶ç æ˜¯0ï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªéè§„æ ¼åŒ–çš„æµ®ç‚¹æ•°ï¼Œç”±äºæµ®ç‚¹æ•°çš„åˆ†è§„æ ¼åŒ–åˆ°è§„æ ¼åŒ–çš„è¿‡æ¸¡æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å°¾æ•°å‘å·¦ç§»åŠ¨ä¸€ä½å˜æˆè§„æ ¼åŒ–æµ®ç‚¹æ•°ä¸æ˜¯ç‰¹æ®Šæƒ…å†µã€‚</li>
<li>å¦‚æœé˜¶ç å…¨ä¸º1ï¼Œè¯´æ˜æ˜¯æ— ç©·å¤§ï¼Œç›´æ¥åŸæ ·è¿”å›å³å¯ã€‚</li>
<li>ç»™é˜¶ç åŠ ä¸Š1ï¼Œå³æ˜¯ç»™å˜é‡<code>exp</code>åŠ ä¸Š<code>0x800000</code>ã€‚</li>
<li>å¦‚æœæº¢å‡ºäº†å˜ä¸ºæ— ç©·å¤§ï¼Œå°±è¦å°†å°¾æ•°å˜ä¸º0ï¼Œå¦åˆ™å°±æ˜¯<code>NaN</code>äº†ã€‚</li>
<li>å°†ä¸‰éƒ¨åˆ†æ‹¼æ¥åè¿”å›ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">unsigned</span> floatScale2(<span style="color:#fff;font-weight:bold">unsigned</span> uf) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">unsigned</span> sign = uf &amp; <span style="color:#ff0;font-weight:bold">0x80000000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">unsigned</span> exp = uf &amp; <span style="color:#ff0;font-weight:bold">0x7f800000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">unsigned</span> frac = uf &amp; <span style="color:#ff0;font-weight:bold">0x007fffff</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp == <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> sign | uf &lt;&lt; <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp == <span style="color:#ff0;font-weight:bold">0x7f800000</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> uf;
</span></span><span style="display:flex;"><span>  exp += <span style="color:#ff0;font-weight:bold">0x00800000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp == <span style="color:#ff0;font-weight:bold">0x7f800000</span>)
</span></span><span style="display:flex;"><span>    frac = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> sign | exp | frac;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="floatfloat2int">floatFloat2Int<a hidden class="anchor" aria-hidden="true" href="#floatfloat2int">#</a></h3>
<p>å°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´å‹æ•°</p>
<p>åœ¨ <em><strong>CSAPP</strong></em> ä¸­ä»‹ç»è¿‡å‡ ç§èˆå…¥çš„æ–¹æ³•ï¼Œåœ¨è®¡ç®—ä¸­å‘å¶æ•°ï¼ˆå¥‡æ•°ï¼‰ä½èˆå…¥ä¼šå‡å°è¯¯å·®ï¼Œè€Œåœ¨ç±»å‹è½¬æ¢ä¸­ï¼Œä½¿ç”¨å‘é›¶èˆå…¥ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<ol>
<li>é¦–å…ˆå°†ç¬¦å·ã€å°¾æ•°ã€é˜¶ç å–å‡ºæ¥ï¼Œä¸ºäº†åŠ å‡æ³•è®¡ç®—æ–¹ä¾¿ï¼Œå¯¹é˜¶ç è¿›è¡Œäº†ç§»ä½ï¼Œå¹¶åŠ ä¸Šäº†127ã€‚</li>
<li>å°¾æ•°çš„ç¬¬24ä½ç½®ä¸º1ï¼Œå› ä¸ºåœ¨è§„æ ¼åŒ–æ•°ä¸­å°±æ˜¯<code>1.x</code>çš„å½¢å¼ã€‚è€Œéè§„æ ¼åŒ–æ•°èˆå…¥å˜ä¸º0ï¼Œä¸éœ€è¦è€ƒè™‘å…¶å°¾æ•°ã€‚</li>
<li>å¦‚æœé˜¶å°äº0ï¼Œç›´æ¥è¿”å›0ã€‚</li>
<li>å¦‚æœé˜¶å¤§äº31ï¼Œè¯´æ˜æ˜¯æ— ç©·å¤§ã€‚</li>
<li>å…¶ä½™æƒ…å†µå°±æ˜¯å¯¹åŠ ä¸Š<code>1.x</code>ï¼ˆ<code>x</code>ä¸ºå°¾æ•°ï¼‰è¿›è¡Œç§»ä½ï¼Œç”±äºå°¾æ•°é•¿24ä½ï¼Œå› æ­¤æœ‰æ–¹å‘å’Œç»å¯¹å€¼è¦æ³¨æ„ã€‚</li>
<li>å¸¦ä¸Šç¬¦å·åè¿”å›ç­”æ¡ˆã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> floatFloat2Int(<span style="color:#fff;font-weight:bold">unsigned</span> uf) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> ans;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> sign = uf &amp; <span style="color:#ff0;font-weight:bold">0x80000000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> exp = ((uf &gt;&gt; <span style="color:#ff0;font-weight:bold">23</span>) &amp; <span style="color:#ff0;font-weight:bold">0xff</span>) -<span style="color:#ff0;font-weight:bold">127</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">int</span> frac = (uf &amp; <span style="color:#ff0;font-weight:bold">0x007fffff</span>) | <span style="color:#ff0;font-weight:bold">0x00800000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp &lt; <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp &gt; <span style="color:#ff0;font-weight:bold">31</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0x80000000</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (exp &lt; <span style="color:#ff0;font-weight:bold">23</span>)
</span></span><span style="display:flex;"><span>    ans = frac &gt;&gt; (<span style="color:#ff0;font-weight:bold">23</span> - exp);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    ans = frac &lt;&lt; (exp - <span style="color:#ff0;font-weight:bold">23</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> sign ? ~ans + <span style="color:#ff0;font-weight:bold">1</span> : ans;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="floatpower2">floatPower2<a hidden class="anchor" aria-hidden="true" href="#floatpower2">#</a></h3>
<p>æ±‚$2.0^x$</p>
<p>åˆ©ç”¨ä¸€ä¸ªç»“è®ºï¼šæœ€å°çš„éè§„æ ¼åŒ–æ•°æ˜¯ $2^{-23}*2^{-126}$ ï¼Œæœ€å¤§çš„éè§„æ ¼åŒ–æ•°æ˜¯ $(1-u)*2^{-126}$ ï¼Œæœ€å°çš„è§„æ ¼åŒ–æ•°æ˜¯ $2^{-126}$ ï¼Œæœ€å¤§è§„æ ¼åŒ–æ•°æ˜¯ $(2-u)*2^{127}$ï¼Œå…¶ä¸­ $u$ ä¸ºæ— ç©·å°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">unsigned</span> floatPower2(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (x &lt; -<span style="color:#ff0;font-weight:bold">149</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (x &lt; -<span style="color:#ff0;font-weight:bold">126</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">1</span> &lt;&lt; x + <span style="color:#ff0;font-weight:bold">149</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">if</span> (x &lt; <span style="color:#ff0;font-weight:bold">128</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> x + <span style="color:#ff0;font-weight:bold">127</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">23</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0xff</span> &lt;&lt; <span style="color:#ff0;font-weight:bold">23</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="æ€»ç»“">æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#æ€»ç»“">#</a></h2>
<p>æµ‹è¯„ç»“æœ</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Correctness Results	Perf Results
</span></span><span style="display:flex;"><span>Points	Rating	Errors	Points	Ops	Puzzle
</span></span><span style="display:flex;"><span>1	1	0	2	8	bitXor
</span></span><span style="display:flex;"><span>1	1	0	2	1	tmin
</span></span><span style="display:flex;"><span>1	1	0	2	7	isTmax
</span></span><span style="display:flex;"><span>2	2	0	2	7	allOddBits
</span></span><span style="display:flex;"><span>2	2	0	2	2	negate
</span></span><span style="display:flex;"><span>3	3	0	2	10	isAsciiDigit
</span></span><span style="display:flex;"><span>3	3	0	2	8	conditional
</span></span><span style="display:flex;"><span>3	3	0	2	6	isLessOrEqual
</span></span><span style="display:flex;"><span>4	4	0	2	12	logicalNeg
</span></span><span style="display:flex;"><span>4	4	0	2	36	howManyBits
</span></span><span style="display:flex;"><span>4	4	0	2	11	floatScale2
</span></span><span style="display:flex;"><span>4	4	0	2	15	floatFloat2Int
</span></span><span style="display:flex;"><span>4	4	0	2	10	floatPower2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Score = 62/62 [36/36 Corr + 26/26 Perf] (<span style="color:#ff0;font-weight:bold">133</span> total operators)
</span></span></code></pre></div><p>åšäº† <em><strong>CSAPP</strong></em> çš„ <strong>Data Lab</strong> è¿˜æ˜¯æ”¶è·è‰¯å¤šçš„ï¼š</p>
<ul>
<li>å‘ç°è‡ªå·±ä¹‹å‰å­¦ä¹ çš„ä½è¿ç®—å’Œæµ®ç‚¹æ•°çš„çŸ¥è¯†è¿˜æœ‰ä¸å°‘æ¼æ´ï¼Œå¹¸å¥½è¡¥èµ·æ¥äº†ã€‚</li>
<li>åœ¨åšè¿™ç§é™åˆ¶æ“ä½œçš„é¢˜ç›®æ—¶ï¼Œä¸€å¼€å§‹è¿˜æ˜¯ä¼šæ„Ÿè§‰å¾ˆä¸é€‚åº”ï¼Œç–¯ç‹‚åœ°æƒ³å†™åˆ†æ”¯åˆ¤æ–­ç­‰æ“ä½œã€‚åšæŒä¸‹æ¥ä¹‹åå°±æœ‰ä¸å°çš„æé«˜ï¼Œå¯¹æŠ½è±¡èƒ½åŠ›å’Œå†™æ›´é«˜æ€§èƒ½çš„ä»£ç éƒ½æœ‰å¸®åŠ©ã€‚</li>
<li><strong>Lab</strong> ä¸­ç»™å‡ºçš„<code>makefile</code>å¼€çš„ç¼–è¯‘é€‰é¡¹ç»™æˆ‘æŠ¥äº†å¾ˆå¤šè­¦å‘Šï¼Œè®©æˆ‘å‘ç°æˆ‘çš„ä»£ç ä¹ æƒ¯ä¸æ˜¯å¾ˆå¥½ï¼Œè¿˜æœ‰å¾ˆå¤§è¿›æ­¥ç©ºé—´ã€‚</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://vaaandark.top/tags/csapp/">CSAPP</a></li>
      <li><a href="https://vaaandark.top/tags/%E5%B8%83%E5%B0%94%E4%BB%A3%E6%95%B0/">å¸ƒå°”ä»£æ•°</a></li>
      <li><a href="https://vaaandark.top/tags/%E7%BC%96%E7%A0%81/">ç¼–ç </a></li>
      <li><a href="https://vaaandark.top/tags/c%E8%AF%AD%E8%A8%80/">Cè¯­è¨€</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://vaaandark.top/posts/how-to-write-gitignore/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>gitignoreæ–‡ä»¶å¦‚ä½•ä¹¦å†™</span>
  </a>
  <a class="next" href="https://vaaandark.top/posts/fibonacci-heap/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>æ–æ³¢é‚£å¥‘å †</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on x"
            href="https://x.com/intent/tweet/?text=CSAPP%20Data%20Lab&amp;url=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f&amp;hashtags=CSAPP%2c%e5%b8%83%e5%b0%94%e4%bb%a3%e6%95%b0%2c%e7%bc%96%e7%a0%81%2cC%e8%af%ad%e8%a8%80">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f&amp;title=CSAPP%20Data%20Lab&amp;summary=CSAPP%20Data%20Lab&amp;source=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f&title=CSAPP%20Data%20Lab">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on whatsapp"
            href="https://api.whatsapp.com/send?text=CSAPP%20Data%20Lab%20-%20https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on telegram"
            href="https://telegram.me/share/url?text=CSAPP%20Data%20Lab&amp;url=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share CSAPP Data Lab on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=CSAPP%20Data%20Lab&u=https%3a%2f%2fvaaandark.top%2fposts%2fcsapp-data-lab%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer><script src="https://giscus.app/client.js"
        data-repo="vaaandark/vaaandark.github.io"
        data-repo-id="R_kgDOGsxTxw"
        data-category="Announcements"
        data-category-id="DIC_kwDOGsxTx84CmAQ1"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://vaaandark.top/">vaaandark&#39;s blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
